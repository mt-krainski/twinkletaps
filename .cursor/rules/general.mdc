---
alwaysApply: true
---
# Project Configuration

## Project Overview
This is a simple Arduino project. The project follows modern development practices with a focus on performance and developer experience.

## Project conventions

- **Component layout:** `src/components/ui/` — shadcn primitives (unchanged). `src/components/app/` — app components (shell and domain content); each in its own dir with `ComponentName.tsx`, stories, and `index.ts`. `src/components/providers/` — context providers.
- **Container/view:** Shell components (e.g. Navbar, Sidebar) that read from context use a thin container (`Navbar.tsx`, `Sidebar.tsx`) that passes props to a presentational component (`NavbarView.tsx`, `SidebarView.tsx`). Stories target the View (props only) where possible. 
- Use `npm` as the package and script runner
- prefer to use command available through `npm run` than invoking similar commands through `npx`.
- **Database migrations** use Supabase (`supabase/migrations/`), NOT Prisma migrations. Prisma is used only for the ORM/client.
- "tests" here mean simple unit and integration tests (`npm run test`) and end to end tests (`npm run test:e2e`). Run `test` for a quick check and run `test:e2e` for a final check before completing the work. Also make sure to keep lint clean (`npm run lint`)

## CI
- Root `.github/workflows/ci.yml` is deprecated and due for removal. New packages must not add jobs to it; add a dedicated workflow instead (e.g. `package-name--ci.yml`). See `cursor-retro--ci.yml` or `twinkletaps-app--ci.yml` for the pattern.

## Other notes
- Unless I explicitly ask for it, don't modify the readme or write other documentation files.
- Be cool and casual, don't use overexaggerated phrases like "You're absolutely right!"
- Prefer to copy or move files to deleting and then reconstructing them.
- Maintain clean code, don't leave unnecessary comments. Comments should be used to explain the "why" of the code, not the "what". **Exception:** In test and story files, brief "what" comments are acceptable to aid readability (e.g. "Check that the theme toggle button exists").
- Before making any bigger changes, be sure to analyze the codebase and used practices and patterns and use them in the new code.
- If we're in a chain of changes, and some functions changed places, unless there is a good reason, don't change the functions back. E.g. if you originally wrote a declaration in `lib.h` and I moved to a different file, don't change the type declaration back `lib.h`.
- prefer using package scripts over generic commands
- tests failing is a jarring issue you must flag in red especially if you think it's an environmental issue or not related to your changes. If it's related to your changes - you should fix the changes to have the tests pass. If it's an environment issue, e.g. playwright browsers not installed, try fixing it too. Otherwise make sure it's clearly visible in your output that tests are failing.
- **No guessing.** Never guess at API signatures, library behavior, migration tooling, or root causes. Always verify by reading source code, checking docs, or running commands first. If you're unsure, say so and investigate — don't propose a fix based on assumptions.
